name: BTC Daily Briefing

on:
  schedule:
    # ë§¤ì¼ 00:00 UTC = 09:00 KST
    - cron: '0 0 * * *'
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

permissions:
  contents: read
  issues: write
  id-token: write

jobs:
  briefing:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Run BTC Briefing
        uses: anthropics/claude-code-action@v1
        with:
          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
          claude_args: "--allowedTools WebSearch,Bash,Edit,Read,Write,TodoWrite"
          prompt: |
            ë¹„íŠ¸ì½”ì¸ ì¼ì¼ ë¸Œë¦¬í•‘ì„ ìƒì„±í•˜ê³  Slackìœ¼ë¡œ ì „ì†¡í•´.
            
            **ì¤‘ìš”: ì‚¬ìš©ì ì…ë ¥ ì—†ì´ ì™„ì „ ìë™ìœ¼ë¡œ ì§„í–‰. AskUserQuestion ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€.**
            
            ## ì‘ì—… ìˆœì„œ
            1. WebSearchë¡œ í˜„ì¬ BTC ê°€ê²©, 24h/7d ë³€ë™ë¥  ìˆ˜ì§‘
            2. ì£¼ìš” ë‰´ìŠ¤ ë° ì‹œì¥ ì‹¬ë¦¬ (Fear & Greed Index) ë¶„ì„
            3. ê¸°ìˆ ì  ë¶„ì„ ìš”ì•½ (ì§€ì§€/ì €í•­, ì¶”ì„¸)
            4. ì˜¤ëŠ˜ì˜ ì „ë§ ì‘ì„±
            5. ì•„ë˜ curl ëª…ë ¹ìœ¼ë¡œ Slack Webhook ì „ì†¡
            
            ## Slack ì „ì†¡ ë°©ë²•
            ë¦¬í¬íŠ¸ ì™„ì„± í›„ Bashë¡œ ë‹¤ìŒ ì‹¤í–‰:
            ```bash
            curl -X POST "${{ secrets.SLACK_WEBHOOK_URL }}" \
              -H 'Content-Type: application/json' \
              -d '{"text": "[ì™„ì„±ëœ ë¦¬í¬íŠ¸ ë‚´ìš©]"}'
            ```
            
            ## ë¦¬í¬íŠ¸ í¬ë§·
            ```
            ğŸ“Š BTC ì¼ì¼ ë¸Œë¦¬í•‘ | [DATE]
            
            ## í˜„ì¬ ê°€ê²©
            - í˜„ì¬ê°€: $XX,XXX
            - 24h ë³€ë™: +X.X%
            - ì£¼ê°„ ë³€ë™: +X.X%
            
            ## ê¸°ìˆ ì  ë¶„ì„
            - ì§€ì§€ì„ : $XX,XXX
            - ì €í•­ì„ : $XX,XXX
            - ì¶”ì„¸: [bullish/bearish/neutral]
            
            ## ì‹œì¥ ì‹¬ë¦¬
            - Fear & Greed: XX (Greed/Fear/Neutral)
            - ì£¼ìš” ë‰´ìŠ¤: [1ì¤„ ìš”ì•½]
            
            ## ì˜¤ëŠ˜ì˜ ì „ë§
            [2-3ë¬¸ì¥ ìš”ì•½]
            
            âš ï¸ ì´ ë¦¬í¬íŠ¸ëŠ” íˆ¬ì ì¡°ì–¸ì´ ì•„ë‹™ë‹ˆë‹¤.
            ```
            
            í•œêµ­ì–´ë¡œ ì‘ì„±í•´.
